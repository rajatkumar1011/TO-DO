<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TO-DO</title>
    <link id="favicon" rel="icon" href=""> <!-- Href will be set by script -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Custom scrollbar for a more modern look */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background-color: #4b5563; /* gray-600 */
            border-radius: 20px;
            border: 3px solid transparent;
        }
        .dark ::-webkit-scrollbar-thumb {
             background-color: #6b7280; /* gray-500 */
        }
        .tabular-nums {
            font-variant-numeric: tabular-nums;
        }
        .task-item {
            transition: all 0.3s ease-in-out;
        }
        .task-item.removing {
            opacity: 0;
            transform: translateX(-20px);
        }
        .task-item.adding {
            animation: slideIn 0.4s ease-out forwards, highlight 0.7s ease-out forwards;
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        @keyframes highlight {
            0% { background-color: rgba(6, 182, 212, 0.2); } /* transparent cyan */
            100% { background-color: transparent; }
        }
        /* Custom focus ring to match the Google aesthetic */
        .custom-focus-ring:focus {
            outline: none;
             box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.5); /* blue-400 with opacity */
        }
        /* Blinking cursor effect for placeholder */
        .blinking-cursor::after {
            content: '|';
            animation: blink 1s step-end infinite;
        }
        @keyframes blink {
            from, to { color: transparent }
            50% { color: inherit }
        }
    </style>
    <!-- The initial theme script has been removed from here to prevent race conditions -->
</head>

<body class="bg-zinc-900 text-zinc-100 transition-colors duration-500">
    <div class="min-h-screen flex flex-col items-center justify-center p-4">
        
        <!-- Theme Toggle Button has been removed -->

        <main class="w-full max-w-2xl bg-zinc-800/50 backdrop-blur-sm shadow-2xl rounded-2xl p-6 md:p-8">
            <div class="header-content flex justify-between items-center mb-6">
                 <h1 class="text-2xl md:text-3xl font-bold text-white">TO-DO</h1>
                <div class="text-right">
                    <p id="date" class="text-md md:text-lg font-semibold text-white"></p>
                    <p id="time" class="tabular-nums text-sm md:text-md text-zinc-400"></p>
                </div>
            </div>

            <!-- Task Input -->
            <form id="task-form" class="flex items-center gap-3 mb-6">
                <input id="task-input" type="text" class="flex-grow bg-zinc-700 text-white border-2 border-transparent rounded-lg py-3 px-4 focus:border-blue-500 custom-focus-ring transition-colors" autocomplete="off">
                <button type="submit" class="bg-gradient-to-r from-cyan-400 to-purple-500 hover:from-cyan-500 hover:to-purple-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-300 custom-focus-ring">
                    Add
                </button>
            </form>

            <!-- Task List -->
            <div id="task-list" class="space-y-3">
                <!-- Tasks will be dynamically inserted here -->
            </div>

            <!-- Empty State -->
            <div id="empty-state" class="text-center py-8 hidden">
                <svg class="mx-auto h-12 w-12 text-zinc-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <h3 class="mt-2 text-lg font-medium text-white">All tasks completed!</h3>
                <p class="mt-1 text-sm text-zinc-400">Add a new task to get started.</p>
            </div>
        </main>
        
        <footer class="flex flex-col items-center space-y-3 text-center mt-8 text-zinc-400 text-sm">
            <p class="text-white">Made with ❤️ by Rajat Kumar</p>
            <div class="flex items-center space-x-4">
                <a href="https://www.linkedin.com/in/rajatkumar7/" target="_blank" rel="noopener noreferrer" class="text-zinc-400 hover:text-blue-400 transition-colors">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" clip-rule="evenodd"/></svg>
                </a>
                <a href="https://github.com/rajatkumar1011" target="_blank" rel="noopener noreferrer" class="text-zinc-400 hover:text-white transition-colors">
                   <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.168 6.839 9.492.5.092.682-.217.682-.482 0-.237-.009-.868-.014-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.031-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.378.203 2.398.1 2.651.64.7 1.03 1.595 1.03 2.688 0 3.848-2.338 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.001 10.001 0 0022 12c0-5.523-4.477-10-10-10z" clip-rule="evenodd"/></svg>
                </a>
            </div>
            <p class="text-white pt-2">&copy; <span id="copyright-year"></span> Rajat Kumar. All Rights Reserved.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const taskForm = document.getElementById('task-form');
            const taskInput = document.getElementById('task-input');
            const taskList = document.getElementById('task-list');
            const emptyState = document.getElementById('empty-state');
            const dateElement = document.getElementById('date');
            const timeElement = document.getElementById('time');
            const copyrightYear = document.getElementById('copyright-year');
            const favicon = document.getElementById('favicon');
            
            // --- Typewriter Placeholder ---
            const placeholderText = "Add a new task...";
            let placeholderIndex = 0;
            let typingInterval;

            const startTyping = () => {
                if (document.activeElement === taskInput) return;
                taskInput.placeholder = '';
                placeholderIndex = 0;
                taskInput.classList.remove('blinking-cursor');
                clearInterval(typingInterval);
                
                typingInterval = setInterval(() => {
                    if (placeholderIndex < placeholderText.length) {
                        taskInput.placeholder += placeholderText.charAt(placeholderIndex);
                        placeholderIndex++;
                    } else {
                        clearInterval(typingInterval);
                        taskInput.classList.add('blinking-cursor');
                    }
                }, 100);
            };

            taskInput.addEventListener('focus', () => {
                clearInterval(typingInterval);
                taskInput.classList.remove('blinking-cursor');
                taskInput.placeholder = placeholderText;
            });
            
            taskInput.addEventListener('blur', () => {
                 if(taskInput.value === '') {
                    startTyping();
                 }
            });

            // --- Theme management has been removed ---

            // --- Date and Time ---
            const updateDateTime = () => {
                const now = new Date();
                const dateOptions = { weekday: 'long', month: 'short', day: 'numeric', timeZone: 'Asia/Kolkata' };
                const timeOptions = { hour: 'numeric', minute: '2-digit', second: '2-digit', hour12: true, timeZone: 'Asia/Kolkata' };
                dateElement.textContent = new Intl.DateTimeFormat('en-US', dateOptions).format(now);
                timeElement.textContent = `${new Intl.DateTimeFormat('en-US', timeOptions).format(now)} IST`;
            };

            // --- Local Storage and Tasks ---
            let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

            const saveTasks = () => {
                localStorage.setItem('tasks', JSON.stringify(tasks));
            };
            
            const checkEmptyState = () => {
                if (tasks.length === 0) {
                    emptyState.classList.remove('hidden');
                    emptyState.classList.add('flex', 'flex-col');
                } else {
                    emptyState.classList.add('hidden');
                    emptyState.classList.remove('flex', 'flex-col');
                }
            };
            
            const renderTasks = () => {
                taskList.innerHTML = '';
                tasks.forEach((task, index) => {
                    const taskElement = createTaskElement(task, index);
                    taskList.appendChild(taskElement);
                });
                checkEmptyState();
            };
            
            const createTaskElement = (task, index) => {
                const li = document.createElement('li');
                li.className = 'task-item flex items-center justify-between bg-zinc-700 p-4 rounded-lg shadow-sm';
                li.dataset.index = index;

                const textSpan = document.createElement('span');
                textSpan.textContent = task.text;
                textSpan.className = `flex-grow text-white ${task.completed ? 'line-through text-zinc-500' : ''}`;
                
                const checkButton = document.createElement('button');
                checkButton.innerHTML = task.completed ? 
                   `<svg class="w-6 h-6 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>`:
                   `<svg class="w-6 h-6 text-zinc-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" style="opacity:0.25"/></svg>`;
                checkButton.className = 'mr-4 custom-focus-ring rounded-full';
                checkButton.onclick = () => toggleTask(index);
                
                const taskContent = document.createElement('div');
                taskContent.className = 'flex items-center cursor-pointer';
                taskContent.onclick = () => toggleTask(index);
                taskContent.appendChild(checkButton);
                taskContent.appendChild(textSpan);

                const deleteButton = document.createElement('button');
                deleteButton.innerHTML = `<svg class="w-6 h-6 text-zinc-400 hover:text-red-500 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>`;
                deleteButton.className = 'custom-focus-ring rounded-md p-1';
                deleteButton.onclick = () => deleteTask(index, li);
                
                li.appendChild(taskContent);
                li.appendChild(deleteButton);
                
                return li;
            };

            const addTask = (text) => {
                tasks.push({ text, completed: false });
                saveTasks();
                const newTaskElement = createTaskElement(tasks[tasks.length - 1], tasks.length - 1);
                newTaskElement.classList.add('adding');
                taskList.appendChild(newTaskElement);
                checkEmptyState();
            };

            const toggleTask = (index) => {
                tasks[index].completed = !tasks[index].completed;
                saveTasks();
                renderTasks();
            };

            const deleteTask = (index, element) => {
                element.classList.add('removing');
                setTimeout(() => {
                    tasks.splice(index, 1);
                    saveTasks();
                    renderTasks();
                }, 300);
            };
            
            taskForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const taskText = taskInput.value.trim();
                if (taskText) {
                    addTask(taskText);
                    taskInput.value = '';
                    taskInput.blur(); // Remove focus to restart placeholder animation
                }
            });

            // --- Initialization ---
            const initializeApp = () => {
                copyrightYear.textContent = new Date().getFullYear();
                favicon.href = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2zM9 17L4 12l1.4-1.4L9 14.2l8.6-8.6L19 7l-10 10z'/%3E%3C/svg%3E";
                updateDateTime();
                setInterval(updateDateTime, 1000);
                renderTasks();
                startTyping();
            };

            initializeApp();
        });
    </script>
</body>

</html>


